if (self.CavalryLogger) { CavalryLogger.start_js(["L6C5Zsh"]); }

__d("useVideoPlayerShakaPerformanceLoggerRelayImpl_init$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init$normalization",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}]};e.exports=a}),null);
__d("useRelayClientStateWithLocalStorage",["CometRelay","FBLogger","WebStorage","react","useStable"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useEffect,j=new Set();function a(a,b,e,f){var g=j.has(b),k=d("CometRelay").useRelayEnvironment(),l=c("useStable")(c("WebStorage").getLocalStorage),m=c("useStable")(function(){if(g||l==null)return f;var a=l.getItem(b);try{return a==null||a===""?f:JSON.parse(a)}catch(a){return f}}),n=h(function(c){d("CometRelay").commitLocalUpdate(k,function(d){d=d.get(a);if(d==null)return;if(d.getValue(e)===c)return;d.setValue(c,e);j.add(b)})},[k,e,a,b]);i(function(){if(l==null)return;if(!g)return;var a=JSON.stringify(f);if(a==null)return;try{l.setItem(b,a)}catch(b){b!=null&&typeof b==="object"&&b.code===22&&l.clear();a=c("FBLogger")("use_local_storage");b instanceof Error&&(a=a.catching(b));a.mustfix("Cannot save to local storage.")}},[b,g,l,f]);return[g?f:m,n]}g.useRelayClientStateWithLocalStorage=a}),98);
__d("useFeedClickEventHandler",["react","useStoryClickEventLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(a,b){var d=c("useStoryClickEventLogger")();return h(function(c){a&&a(c);var e=c.type;if(e==="click"||e==="contextmenu"||e==="mousedown"&&typeof c.button==="number"&&(c.button===1||c.button===2)||e==="keydown"&&(c.key==="Enter"||c.key===" ")){e=typeof c.button==="number"?c.button:0;d(c.timeStamp,e,b)}},[a,d,b])}g["default"]=a}),98);
__d("useVideoPlayerControllerSubscription",["VideoPlayerHooks","react","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef,j=b.useState;function a(a){var b=d("VideoPlayerHooks").useController(),e=j(function(){return a(b,null)}),f=e[0],g=e[1],k=i(a);c("useLayoutEffect_SAFE_FOR_SSR")(function(){k.current=a},[a]);h(function(){g(function(a){return k.current(b,a)});var a=b.subscribe(function(){g(function(a){return k.current(b,a)})});return function(){a.remove()}},[b]);return f}g["default"]=a}),98);
__d("useAudioAvailabilityAtPlayhead",["VideoPlayerAudioAvailabilityInfo","VideoPlayerHooks","useVideoPlayerControllerSubscription"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("VideoPlayerHooks").useAudioAvailabilityInfo();function b(b,c){b=b.getPlayheadPosition();b=d("VideoPlayerAudioAvailabilityInfo").makeVideoPlayerAudioAvailabilityAtPlayheadInfo(a,{playheadPosition:b});return c!=null&&c.isPlayheadWithinMutedSegment===b.isPlayheadWithinMutedSegment&&c.isSilentAtPlayhead===b.isSilentAtPlayhead&&c.volumeControlState===b.volumeControlState?c:b}return c("useVideoPlayerControllerSubscription")(b)}g["default"]=a}),98);
__d("useVideoPlayerVolumeControlAudioAvailabilityUI",["fbt","CometTooltipImpl.react","VideoPlayerControlsHiddenContext","clearTimeout","emptyFunction","gkx","react","setTimeout","useAudioAvailabilityAtPlayhead","useLayoutEffect_SAFE_FOR_SSR","usePrevious","useStable"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useContext;e=b.useEffect;var k=b.useRef,l=b.useState,m=c("gkx")("3501")?e:c("useLayoutEffect_SAFE_FOR_SSR"),n=3e3;function a(a){var b=a.canPlayerProduceSound,d=a.isHovering;a=c("useAudioAvailabilityAtPlayhead")();var e=a.isSilentAtPlayhead;a=a.volumeControlState;var f=null;switch(a){case"VOLUME_SILENT":f=h._("Video haina sauti");break;case"VOLUME_COPYRIGHT_FULL":f=h._("Imenyamazishwa kwa sababu ya dai la hakimiliki");break;case"VOLUME_COPYRIGHT_PARTIAL_SILENCED":f=h._("Imenyamazishwa kidogo kwa sababu ya dai la hakimiliki");break;case"VOLUME_COPYRIGHT_PARTIAL_NOT_SILENCED":break;case"VOLUME_DEFAULT":break;default:a}var g=c("usePrevious")(e),o=l(!1),p=o[0],q=o[1],r=k(c("emptyFunction")),s=k(!1);o=l(!1);var t=o[0],u=o[1],v=c("useStable")(function(){return function(a){s.current=a,u(a),r.current(a),a||q(!1)}}),w=j(c("VideoPlayerControlsHiddenContext"));m(function(){w?v(!1):f==null?v(!1):d||p?v(!0):e!==g&&e&&b&&v(!0)},[f,b,w,d,p,e,g,v]);m(function(){if(t){var a=c("setTimeout")(function(){v(!1)},n);return function(){c("clearTimeout")(a)}}},[t,v]);o=c("useStable")(function(){return function(){q(function(a){return!a})}});var x=c("useStable")(function(){return function(a){var b=l(!1),d=b[0],e=b[1];m(function(){r.current=e;return function(){r.current=c("emptyFunction")}},[e]);m(function(){a.isVisible||v(!1)},[a.isVisible]);return i.jsx(c("CometTooltipImpl.react"),babelHelpers["extends"]({},a,{isVisible:d}))}}),y=a==="VOLUME_COPYRIGHT_FULL"||a==="VOLUME_SILENT",z=b?e:y;return f==null?null:{onVolumeControlPress:o,shouldDisableVolumeControl:y,shouldShowNullIcon:z,tooltipContent:f,tooltipImpl:x,volumeControlState:a}}g["default"]=a}),98);
__d("useSelectedLatencySetting",["useRelayClientStateWithLocalStorage"],(function(a,b,c,d,e,f,g){"use strict";var h="_video_LiveVideoLatencyMenuContextProvider_selected_latency_setting";function i(a){if(a==null)return null;switch(a){case"low":case"normal":return a;default:return null}}function a(a,b){b=d("useRelayClientStateWithLocalStorage").useRelayClientStateWithLocalStorage(a,h,"selected_latency_setting",(a=i(b))!=null?a:"normal");a=b[0];b=b[1];return[a,b]}g["default"]=a}),98);
__d("oz-player/strategies/OzBlockedRepresentationsManager",["oz-player/shims/OzEventEmitter","oz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$1=new Set();this.$2=new Set();this.$3=new(c("oz-player/shims/OzEventEmitter"))();try{a=JSON.parse(a.getString("block_representation_status_codes_json"));Array.isArray(a)&&a.forEach(function(a){var c=parseInt(a,10);isNaN(c)||b.$1.add(a)})}catch(a){this.$1=new Set()}}var b=a.prototype;b.isBlocked=function(a){return this.$2.has(a)};b.handleError=function(a,b){if(b instanceof c("oz-player/utils/OzError")&&b.getType()==="OZ_NETWORK"){b=Number(b.getExtra().code);if(!isNaN(b)&&this.$1.has(b)){if(!this.$2.has(a)){this.$2.add(a);(b=this.$3)==null?void 0:b.emit("representation_blocked",a)}return!0}}return!1};b.applyRestriction=function(a,b){var c=this;return a.filter(function(a){return!c.$2.has(a.getID())})};b.onRepresentationBlocked=function(a){return this.$3?this.$3.addListener("representation_blocked",a):{remove:function(){}}};b.destroy=function(){var a;(a=this.$3)==null?void 0:a.removeAllListeners();this.$3=null};return a}();g["default"]=a}),98);
__d("VideoPlayerMainThreadAvailability",["ShakaConstants","Visibility","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h=window.__fbNativeSetTimeout,i=a.__fbNativeClearTimeout,j=window.requestIdleCallback,k=window.cancelIdleCallback,l=function(a,b){var c=function c(){a(c,b)};return c};b=function(){function a(){this.$1=!1,this.$2=null,this.$3=null,this.$4=null}var b=a.prototype;b.enable=function(){if(this.$1||!this.$5())return;this.$6();this.$7();this.$1=!0};b.getTimeSinceMainThreadAvailable=function(){return this.$2!=null?c("performanceNow")()-Number(this.$2):null};b.$8=function(){this.$2=c("Visibility").isHidden()?null:c("performanceNow")()};b.$9=function(){this.$2=null,typeof this.$4==="number"&&(k(this.$4),this.$4=null),typeof this.$3==="number"&&(i(this.$3),this.$3=null)};b.$7=function(){this.$10()};b.$6=function(){var a=this;c("Visibility").addListener(c("Visibility").VISIBLE,function(){a.$9(),a.$7()});c("Visibility").addListener(c("Visibility").HIDDEN,function(){a.$9()})};b.$10=function(){var a=this,b=c("ShakaConstants").numbers.settimeout_polling_delay;if(b>-1){var d=function c(){a.$8(),a.$3=h(c,b)};h(d,b)}};b.$5=function(){return c("Visibility").isSupported()&&typeof j==="function"&&typeof k==="function"&&typeof h==="function"&&typeof i==="function"};b.maybeEnablePerformanceTest=function(){var a,b=c("ShakaConstants").numbers.recursive_ric_timeout;b>-1&&({timeout:b});b=c("ShakaConstants").numbers.recursive_native_settimeout_delay;b>-1&&typeof h==="function"&&(a=l(h,b));a&&a()};return a}();d=new b();g["default"]=d}),98);
__d("VideoPlayerDashPerformanceLoggerEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1962341");c=b("FalcoLoggerInternal").create("video_player_dash_performance_logger_event",a);e.exports=c}),null);
__d("VideoPlayerDashPerformanceLoggerPayloadBuilder",[],(function(a,b,c,d,e,f){"use strict";var g={access_token:void 0,additional_buffered_ranges:void 0,append_target:void 0,appended_buffer_ms:void 0,bandwidth_estimate:void 0,client_time_begin:void 0,client_time_duration:void 0,client_time_end:void 0,code:void 0,concluder:void 0,connection_quality_level:void 0,content_length_header:void 0,device_pixel_ratio_float:void 0,dropped_frames:void 0,dynamic_bitrate:void 0,edge_hit_header:void 0,ended:void 0,error:void 0,event:void 0,expected_length:void 0,fbls_to_ply_dis_ms:void 0,initiator:void 0,is_drm:void 0,is_live:void 0,is_muted:void 0,is_online:void 0,is_p2p_playback:void 0,is_page_visible:void 0,is_ring_buffer_sample:void 0,is_servable_via_fbms:void 0,is_templated_manifest:void 0,last_buffered_end:void 0,last_buffered_start:void 0,last_buffering_event_end_time:void 0,last_buffering_event_start_time:void 0,last_playing_event_time:void 0,length:void 0,livehead_delta:void 0,livehead_seq_num_header:void 0,livehead_seq_num_mpd:void 0,logical_cpu_count:void 0,lowest_quality_representation_id:void 0,manifest_type:void 0,mediastream_event_count:void 0,one_observed:void 0,one_req_wave:void 0,one_res_wave:void 0,origin_hit_header:void 0,parent_id:void 0,playback_fbms_param:void 0,playback_rate:void 0,player_height:void 0,player_instance_count:void 0,player_origin_caller_specified:void 0,player_suborigin:void 0,player_version:void 0,player_width:void 0,playhead:void 0,preload_time:void 0,previous_representation_id:void 0,priority_float:void 0,proxy_status_header:void 0,pushed:void 0,reason:void 0,representation_id:void 0,reschedule_count:void 0,resource:void 0,response_time_ms_header:void 0,result:void 0,script_path:void 0,segment_count:void 0,segment_end_time:void 0,segment_start_time:void 0,segment_time_gap:void 0,sequential_id:void 0,session:void 0,state:void 0,stream_switch_reason:void 0,time_between_bytes_max:void 0,time_since_main_thread_available:void 0,time_to_first_byte:void 0,time_to_last_byte:void 0,time_to_request_sent:void 0,time_to_request_start:void 0,total_frames:void 0,type:void 0,update_period:void 0,user_info:void 0,video_duration:void 0,video_id:void 0,video_playback_experience_issue:void 0,was_delayed:void 0};function h(a){var b=a;typeof b==="string"&&(b=Number(a));return b!=null&&isFinite(b)?String(Math.floor(b)):null}a=function(){function a(){this.$1=babelHelpers["extends"]({},g)}var b=a.prototype;b.clear=function(){this.$1=babelHelpers["extends"]({},g);return this};b.getData=function(){return babelHelpers["extends"]({},this.$1)};b.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};b.setAccessToken=function(a){this.$1.access_token=a;return this};b.setAdditionalBufferedRanges=function(a){this.$1.additional_buffered_ranges=a;return this};b.setAppendTarget=function(a){this.$1.append_target=h(a);return this};b.setAppendedBufferMs=function(a){this.$1.appended_buffer_ms=h(a);return this};b.setBandwidthEstimate=function(a){this.$1.bandwidth_estimate=h(a);return this};b.setClientTimeBegin=function(a){this.$1.client_time_begin=h(a);return this};b.setClientTimeDuration=function(a){this.$1.client_time_duration=h(a);return this};b.setClientTimeEnd=function(a){this.$1.client_time_end=h(a);return this};b.setCode=function(a){this.$1.code=h(a);return this};b.setConcluder=function(a){this.$1.concluder=a;return this};b.setConnectionQualityLevel=function(a){this.$1.connection_quality_level=a;return this};b.setContentLengthHeader=function(a){this.$1.content_length_header=h(a);return this};b.setDevicePixelRatioFloat=function(a){this.$1.device_pixel_ratio_float=a;return this};b.setDroppedFrames=function(a){this.$1.dropped_frames=h(a);return this};b.setDynamicBitrate=function(a){this.$1.dynamic_bitrate=h(a);return this};b.setEdgeHitHeader=function(a){this.$1.edge_hit_header=a;return this};b.setEnded=function(a){this.$1.ended=a;return this};b.setError=function(a){this.$1.error=a;return this};b.setEvent=function(a){this.$1.event=a;return this};b.setExpectedLength=function(a){this.$1.expected_length=h(a);return this};b.setFblsToPlyDisMs=function(a){this.$1.fbls_to_ply_dis_ms=h(a);return this};b.setInitiator=function(a){this.$1.initiator=a;return this};b.setIsDrm=function(a){this.$1.is_drm=a;return this};b.setIsLive=function(a){this.$1.is_live=a;return this};b.setIsMuted=function(a){this.$1.is_muted=a;return this};b.setIsOnline=function(a){this.$1.is_online=a;return this};b.setIsP2pPlayback=function(a){this.$1.is_p2p_playback=a;return this};b.setIsPageVisible=function(a){this.$1.is_page_visible=a;return this};b.setIsRingBufferSample=function(a){this.$1.is_ring_buffer_sample=a;return this};b.setIsServableViaFbms=function(a){this.$1.is_servable_via_fbms=a;return this};b.setIsTemplatedManifest=function(a){this.$1.is_templated_manifest=a;return this};b.setLastBufferedEnd=function(a){this.$1.last_buffered_end=h(a);return this};b.setLastBufferedStart=function(a){this.$1.last_buffered_start=h(a);return this};b.setLastBufferingEventEndTime=function(a){this.$1.last_buffering_event_end_time=h(a);return this};b.setLastBufferingEventStartTime=function(a){this.$1.last_buffering_event_start_time=h(a);return this};b.setLastPlayingEventTime=function(a){this.$1.last_playing_event_time=h(a);return this};b.setLength=function(a){this.$1.length=h(a);return this};b.setLiveheadDelta=function(a){this.$1.livehead_delta=h(a);return this};b.setLiveheadSeqNumHeader=function(a){this.$1.livehead_seq_num_header=h(a);return this};b.setLiveheadSeqNumMpd=function(a){this.$1.livehead_seq_num_mpd=h(a);return this};b.setLogicalCpuCount=function(a){this.$1.logical_cpu_count=h(a);return this};b.setLowestQualityRepresentationID=function(a){this.$1.lowest_quality_representation_id=a;return this};b.setManifestType=function(a){this.$1.manifest_type=a;return this};b.setMediastreamEventCount=function(a){this.$1.mediastream_event_count=h(a);return this};b.setOneObserved=function(a){this.$1.one_observed=a;return this};b.setOneReqWave=function(a){this.$1.one_req_wave=h(a);return this};b.setOneResWave=function(a){this.$1.one_res_wave=h(a);return this};b.setOriginHitHeader=function(a){this.$1.origin_hit_header=a;return this};b.setParentID=function(a){this.$1.parent_id=h(a);return this};b.setPlaybackFbmsParam=function(a){this.$1.playback_fbms_param=a;return this};b.setPlaybackRate=function(a){this.$1.playback_rate=a;return this};b.setPlayerHeight=function(a){this.$1.player_height=h(a);return this};b.setPlayerInstanceCount=function(a){this.$1.player_instance_count=h(a);return this};b.setPlayerOriginCallerSpecified=function(a){this.$1.player_origin_caller_specified=a;return this};b.setPlayerSuborigin=function(a){this.$1.player_suborigin=a;return this};b.setPlayerVersion=function(a){this.$1.player_version=a;return this};b.setPlayerWidth=function(a){this.$1.player_width=h(a);return this};b.setPlayhead=function(a){this.$1.playhead=h(a);return this};b.setPreloadTime=function(a){this.$1.preload_time=h(a);return this};b.setPreviousRepresentationID=function(a){this.$1.previous_representation_id=a;return this};b.setPriorityFloat=function(a){this.$1.priority_float=a;return this};b.setProxyStatusHeader=function(a){this.$1.proxy_status_header=a;return this};b.setPushed=function(a){this.$1.pushed=h(a);return this};b.setReason=function(a){this.$1.reason=a;return this};b.setRepresentationID=function(a){this.$1.representation_id=a;return this};b.setRescheduleCount=function(a){this.$1.reschedule_count=h(a);return this};b.setResource=function(a){this.$1.resource=a;return this};b.setResponseTimeMsHeader=function(a){this.$1.response_time_ms_header=h(a);return this};b.setResult=function(a){this.$1.result=a;return this};b.setScriptPath=function(a){this.$1.script_path=a;return this};b.setSegmentCount=function(a){this.$1.segment_count=h(a);return this};b.setSegmentEndTime=function(a){this.$1.segment_end_time=h(a);return this};b.setSegmentStartTime=function(a){this.$1.segment_start_time=h(a);return this};b.setSegmentTimeGap=function(a){this.$1.segment_time_gap=h(a);return this};b.setSequentialID=function(a){this.$1.sequential_id=h(a);return this};b.setSession=function(a){this.$1.session=a;return this};b.setState=function(a){this.$1.state=a;return this};b.setStreamSwitchReason=function(a){this.$1.stream_switch_reason=a;return this};b.setTimeBetweenBytesMax=function(a){this.$1.time_between_bytes_max=h(a);return this};b.setTimeSinceMainThreadAvailable=function(a){this.$1.time_since_main_thread_available=h(a);return this};b.setTimeToFirstByte=function(a){this.$1.time_to_first_byte=h(a);return this};b.setTimeToLastByte=function(a){this.$1.time_to_last_byte=h(a);return this};b.setTimeToRequestSent=function(a){this.$1.time_to_request_sent=h(a);return this};b.setTimeToRequestStart=function(a){this.$1.time_to_request_start=h(a);return this};b.setTotalFrames=function(a){this.$1.total_frames=h(a);return this};b.setType=function(a){this.$1.type=a;return this};b.setUpdatePeriod=function(a){this.$1.update_period=h(a);return this};b.setUserInfo=function(a){this.$1.user_info=a;return this};b.setVideoDuration=function(a){this.$1.video_duration=h(a);return this};b.setVideoID=function(a){this.$1.video_id=a;return this};b.setVideoPlaybackExperienceIssue=function(a){this.$1.video_playback_experience_issue=a;return this};b.setWasDelayed=function(a){this.$1.was_delayed=a;return this};b.setDynamicStatusHeader=function(a){this.$1.dynamic_status_header=a;return this};return a}();f.convertToInt64=h;f.VideoPlayerDashPerformanceLoggerPayloadBuilder=a}),66);
__d("ExtendableVideoPlayerShakaPerformanceTypedLogger",["VideoPlayerDashPerformanceLoggerEventFalcoEvent","VideoPlayerDashPerformanceLoggerPayloadBuilder","VideoPlayerShakaPerformanceLoggerConfig","clearTimeout","gkx","qex","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=(a=c("qex")._("2008744"))!=null?a:999,i=(b=c("qex")._("2008745"))!=null?b:12e4,j=[],k=0,l=!1,m=!1,n=null;e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.isEnabled=function(){return b.$ExtendableVideoPlayerShakaPerformanceTypedLogger4()||b.$ExtendableVideoPlayerShakaPerformanceTypedLogger5()};b.disable=function(){l=!1};b.enable=function(){l=!0};b.$ExtendableVideoPlayerShakaPerformanceTypedLogger6=function(a){a=j[a];if(a!=null){var c=new b();c.updateData(a).log()}};b.flushQueuedLogs=function(){k=k>h?0:k;if(!b.isEnabled()){m=!0;b.enable();for(var a=k;a<=h;++a)b.$ExtendableVideoPlayerShakaPerformanceTypedLogger6(a);for(var a=0;a<k;++a)b.$ExtendableVideoPlayerShakaPerformanceTypedLogger6(a);j=[];k=0}m&&(n!=null&&c("clearTimeout")(n),n=c("setTimeout")(function(){n=null,m=!1,b.disable()},i))};b.$ExtendableVideoPlayerShakaPerformanceTypedLogger4=function(){return d("VideoPlayerShakaPerformanceLoggerConfig").isSampled};b.$ExtendableVideoPlayerShakaPerformanceTypedLogger5=function(){return l};var e=b.prototype;e.$ExtendableVideoPlayerShakaPerformanceTypedLogger7=function(){m&&this.setIsRingBufferSample(!0),this.$ExtendableVideoPlayerShakaPerformanceTypedLogger8()};e.log=function(){b.isEnabled()?this.$ExtendableVideoPlayerShakaPerformanceTypedLogger7():c("gkx")("2007884")&&(k=k>h?0:k,j[k++]=this.getData())};e.setState=function(b){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1=b;return a.prototype.setState.call(this,b)};e.getState=function(){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1};e.setType=function(b){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger3=b;return a.prototype.setType.call(this,b)};e.getType=function(){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger3};e.setIsRingBufferSample=function(b){a.prototype.setIsRingBufferSample.call(this,b);return this};e.setSequentialID=function(b){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger2=b;a.prototype.setSequentialID.call(this,b);return this};e.setParentLogger=function(a){this.setParentID(a.$ExtendableVideoPlayerShakaPerformanceTypedLogger2);return this};e.$ExtendableVideoPlayerShakaPerformanceTypedLogger8=function(){var a=this;c("VideoPlayerDashPerformanceLoggerEventFalcoEvent").log(function(){return a.getData()})};return b}(d("VideoPlayerDashPerformanceLoggerPayloadBuilder").VideoPlayerDashPerformanceLoggerPayloadBuilder);g["default"]=e}),98);
__d("VideoPlayerShakaPerformanceLogger",["ExtendableVideoPlayerShakaPerformanceTypedLogger","ScriptPath","VideoPlaybackQuality","VideoPlayerMainThreadAvailability","VideoPlayerShakaGlobalConfig","VideoPlayerShakaPerformanceLoggerConfig","Visibility","clearTimeout","gkx","oz-player/loggings/OzPerfLoggerProviderBase","oz-player/utils/OzError","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h=9e4,i=200;c("VideoPlayerMainThreadAvailability").maybeEnablePerformanceTest();var j=!1;a=function(a){babelHelpers.inheritsLoose(b,a);b.forceShouldSample=function(){j=!0,c("ExtendableVideoPlayerShakaPerformanceTypedLogger").enable()};b.shouldInitialize=function(){return j||Boolean(d("VideoPlayerShakaPerformanceLoggerConfig").isSampled)||c("gkx")("2007884")};b.flushQueuedLogs=function(){c("ExtendableVideoPlayerShakaPerformanceTypedLogger").flushQueuedLogs()};b.setVideoPlaybackExperienceIssue=function(a){b.$VideoPlayerShakaPerformanceLogger27=a};b.isEnabled=function(){return c("ExtendableVideoPlayerShakaPerformanceTypedLogger").isEnabled()};function b(c){var d,e;e=a.call(this)||this;e.$VideoPlayerShakaPerformanceLogger13=!1;e.$VideoPlayerShakaPerformanceLogger23=0;e.$VideoPlayerShakaPerformanceLogger24=0;e.$VideoPlayerShakaPerformanceLogger22=c;e.$VideoPlayerShakaPerformanceLogger2=c.videoID;e.$VideoPlayerShakaPerformanceLogger4=c.video;e.$VideoPlayerShakaPerformanceLogger1=c.uniqueID;e.$VideoPlayerShakaPerformanceLogger3=0;e.$VideoPlayerShakaPerformanceLogger11=c.isLive;e.$VideoPlayerShakaPerformanceLogger12=c.isServableViaFbms;e.$VideoPlayerShakaPerformanceLogger9=null;e.$VideoPlayerShakaPerformanceLogger14=c.accessToken;e.$VideoPlayerShakaPerformanceLogger15=c.playerOrigin;e.$VideoPlayerShakaPerformanceLogger16=c.playerSuborigin;e.$VideoPlayerShakaPerformanceLogger17=c.playerVersion;e.$VideoPlayerShakaPerformanceLogger25=c.getBandwidthEstimate;e.$VideoPlayerShakaPerformanceLogger26=(d=c.getPlayerDimensions)!=null?d:null;e.setRepresentationID(c.representationId);e.$VideoPlayerShakaPerformanceLogger28=c.isDrm;e.$VideoPlayerShakaPerformanceLogger29={};e.$VideoPlayerShakaPerformanceLogger30=(d=c.playerInstanceCount)!=null?d:null;b.maybeEnableMainThreadAvailabilityLogging();return e}b.maybeEnableMainThreadAvailabilityLogging=function(){d("VideoPlayerShakaGlobalConfig").getBool("enable_main_thread_availability_logging",!1)&&c("ExtendableVideoPlayerShakaPerformanceTypedLogger").isEnabled()&&c("VideoPlayerMainThreadAvailability").enable()};var e=b.prototype;e.$VideoPlayerShakaPerformanceLogger32=function(a){a=a;var b=this.$VideoPlayerShakaPerformanceLogger4.buffered;if(b.length>0){var c=b.length-1;a=a.setLastBufferedStart(Math.round(b.start(c)*1e3)).setLastBufferedEnd(Math.round(b.end(c)*1e3))}c=[];for(var d=0;d<b.length-1;d++){var e=Math.round(this.$VideoPlayerShakaPerformanceLogger4.buffered.start(d)*1e3),f=Math.round(this.$VideoPlayerShakaPerformanceLogger4.buffered.end(d)*1e3);c.push([e,f])}c&&c.length&&(a=a.setAdditionalBufferedRanges(JSON.stringify(c)));return a};e.setType=function(a){this.$VideoPlayerShakaPerformanceLogger21=a;return this};e.createLoggerProvider=function(){return new self(this.$VideoPlayerShakaPerformanceLogger22)};e.getLiveheadDelta=function(){return this.$VideoPlayerShakaPerformanceLogger9?Math.round((this.$VideoPlayerShakaPerformanceLogger9-this.$VideoPlayerShakaPerformanceLogger4.currentTime)*1e3):null};e.getVideoID=function(){return this.$VideoPlayerShakaPerformanceLogger2};e.setIsTemplatedManifest=function(a){this.$VideoPlayerShakaPerformanceLogger13=a};e.getEventLogger=function(a){var e=this,f=Date.now(),g=new(c("ExtendableVideoPlayerShakaPerformanceTypedLogger"))(),h=this.$VideoPlayerShakaPerformanceLogger4.currentTime,i=this.$VideoPlayerShakaPerformanceLogger4.duration,j=this.$VideoPlayerShakaPerformanceLogger25(this.$VideoPlayerShakaPerformanceLogger11),k=this.$VideoPlayerShakaPerformanceLogger22.getApproximateFBLSToPlayerDisplayLatency(),l=this.$VideoPlayerShakaPerformanceLogger26?this.$VideoPlayerShakaPerformanceLogger26():null;this.$VideoPlayerShakaPerformanceLogger32(g).setEvent(a).setVideoID(this.$VideoPlayerShakaPerformanceLogger2).setDroppedFrames(d("VideoPlaybackQuality").getDroppedFrames(this.$VideoPlayerShakaPerformanceLogger4)).setTotalFrames(d("VideoPlaybackQuality").getTotalFrames(this.$VideoPlayerShakaPerformanceLogger4)).setEnded(this.$VideoPlayerShakaPerformanceLogger4.ended).setIsMuted(this.$VideoPlayerShakaPerformanceLogger4.muted).setPlaybackRate(this.$VideoPlayerShakaPerformanceLogger4.playbackRate).setDynamicBitrate(this.$VideoPlayerShakaPerformanceLogger20).setPlayhead(Math.round(h*1e3)).setVideoDuration(Math.round(i*1e3)).setLogicalCpuCount(navigator&&navigator.hardwareConcurrency).setPlayerOriginCallerSpecified(this.$VideoPlayerShakaPerformanceLogger15).setScriptPath(d("ScriptPath").getScriptPath()).setPlayerHeight(l?l.height:null).setPlayerWidth(l?l.width:null).setPlayerSuborigin(this.$VideoPlayerShakaPerformanceLogger16).setPlayerVersion(this.$VideoPlayerShakaPerformanceLogger17).setBandwidthEstimate(j==null?null:Math.round(j)).setRepresentationID(this.getRepresentationID()).setLowestQualityRepresentationID(this.$VideoPlayerShakaPerformanceLogger19).setIsLive(this.$VideoPlayerShakaPerformanceLogger11).setIsServableViaFbms(this.$VideoPlayerShakaPerformanceLogger12).setPlaybackFbmsParam(this.$VideoPlayerShakaPerformanceLogger31).setIsPageVisible(!c("Visibility").isHidden()).setIsTemplatedManifest(this.$VideoPlayerShakaPerformanceLogger13).setSession(this.$VideoPlayerShakaPerformanceLogger1).setDevicePixelRatioFloat(window.devicePixelRatio||1).setManifestType(this.$VideoPlayerShakaPerformanceLogger18).setLiveheadSeqNumMpd(this.$VideoPlayerShakaPerformanceLogger10).setSequentialID(this.$VideoPlayerShakaPerformanceLogger3++).setState(this.$VideoPlayerShakaPerformanceLogger5).setLastBufferingEventStartTime(this.$VideoPlayerShakaPerformanceLogger8).setLastBufferingEventEndTime(this.$VideoPlayerShakaPerformanceLogger7).setLastPlayingEventTime(this.$VideoPlayerShakaPerformanceLogger6).setLiveheadDelta(this.getLiveheadDelta()).setPushed(0).setResult("success").setAccessToken(this.$VideoPlayerShakaPerformanceLogger14).setVideoPlaybackExperienceIssue(b.$VideoPlayerShakaPerformanceLogger27).setClientTimeBegin(f).setClientTimeDuration(0).setClientTimeEnd(f).setIsDrm(this.$VideoPlayerShakaPerformanceLogger28).setPlayerInstanceCount(this.$VideoPlayerShakaPerformanceLogger30).setFblsToPlyDisMs((k==null?void 0:k.latencyFromMpdUpdate)!=null?Math.round(k.latencyFromMpdUpdate*1e3):null);var m=this,n=g.setState;g.setState=function(a){a!==this.$VideoPlayerShakaPerformanceLogger5&&a==="playing"?m.$VideoPlayerShakaPerformanceLogger6=Date.now():a!=="playing"&&(m.$VideoPlayerShakaPerformanceLogger6=null);m.$VideoPlayerShakaPerformanceLogger5=a;return n.call(this,a)};g.updateState=function(a){return this.getState()==m.$VideoPlayerShakaPerformanceLogger5?this.setState(a):this};var o=g.setError;g.setError=function(a){if(typeof a==="object"&&a!=null)if(a instanceof c("oz-player/utils/OzError"))this.setResult("failed"),this.setCode(a.getExtra().code),o.call(this,a.getType());else{if(a.type==="aborted"||a.type==="delay")this.setResult("aborted");else if(a.type==="paused")this.setResult("paused");else{this.setResult("failed");if(c("gkx")("648"))if(a.type!=null&&a.type!=="")o.call(this,a.type);else{var b=function(a){a=a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b});return a};o.call(this,b(a.name+": "+a.message))}else o.call(this,a.type)}this.setCode(a.status||a.errorRawTransportStatus)}else o.call(this,a);return this};var p=g.setManifestType;g.setManifestType=function(a){e.$VideoPlayerShakaPerformanceLogger18=a;return p.call(g,a)};var q=g.setPlaybackFbmsParam;g.setPlaybackFbmsParam=function(a){e.$VideoPlayerShakaPerformanceLogger31=a;return q.call(g,a)};g.setLiveheadPosition=function(a){e.$VideoPlayerShakaPerformanceLogger9=a;g.setLiveheadDelta(e.getLiveheadDelta());return g};var r=g.setLiveheadSeqNumMpd;g.setLiveheadSeqNumMpd=function(a){e.$VideoPlayerShakaPerformanceLogger10=a;return r.call(g,a)};var s=g.setIsTemplatedManifest;g.setIsTemplatedManifest=function(a){var b;e.$VideoPlayerShakaPerformanceLogger13=(b=a)!=null?b:!1;return s.call(g,a)};var t=g.setDynamicBitrate;g.setDynamicBitrate=function(a){a=Number(a)||null;e.setDynamicBitrate(a);return t.call(g,a)};var u=g.setLowestQualityRepresentationID;g.setLowestQualityRepresentationID=function(a){e.$VideoPlayerShakaPerformanceLogger19=a;return u.call(g,a)};g.setWasPrefetchCacheHit=function(a){return g};return g};e.getOperationLogger=function(a){a=this.createOperationLogger(a);this.setOperationContext(a);return a};e.createOperationLogger=function(a){var b=this.getEventLogger(a);b.setClientTimeEnd(null);b.setClientTimeDuration(null);var d=b.setResource;b.setResource=function(a){return d.call(b,a)};var e=b.log,f=this,g=!1,i=null;b.log=function(){var b=this;if(g)return;c("clearTimeout")(i);var d=Date.now(),h=b.getData().client_time_begin,j=b.getData().client_time_end;h=h!=null?Number(h):null;j=j!=null?Number(j):null;(h==null||h===0)&&(h=d,b.setClientTimeBegin(h));(j==null||j===0)&&(j=d,b.setClientTimeEnd(j));b.setClientTimeDuration(j-h);h=c("VideoPlayerMainThreadAvailability").getTimeSinceMainThreadAvailable();b.setTimeSinceMainThreadAvailable(h!=null?Math.round(h):null);f.$VideoPlayerShakaPerformanceLogger33(h);f.$VideoPlayerShakaPerformanceLogger23=d;a==="buffering"&&(f.$VideoPlayerShakaPerformanceLogger7=j);g=!0;h=b.getType();h&&(f.$VideoPlayerShakaPerformanceLogger29[h+a]=(f.$VideoPlayerShakaPerformanceLogger29[h+a]||0)+1,b.setMediastreamEventCount(f.$VideoPlayerShakaPerformanceLogger29[h+a]));return e.call(b)};b.start=function(){var d=Date.now();this.setClientTimeBegin(d);this.setClientTimeDuration(null);this.setClientTimeEnd(null);c("clearTimeout")(i);i=null;i=c("setTimeoutAcrossTransitions")(function(){c("clearTimeout")(i),i=null,b.setResult("timeout"),b.log()},h);a==="buffering"&&(f.$VideoPlayerShakaPerformanceLogger8=Date.now());return b};return b};e.$VideoPlayerShakaPerformanceLogger33=function(a){if(a==null||i===0||this.$VideoPlayerShakaPerformanceLogger23===0||a<i||this.$VideoPlayerShakaPerformanceLogger24<a){this.$VideoPlayerShakaPerformanceLogger24=Number(a);return}var b=this.$VideoPlayerShakaPerformanceLogger23,c=Math.round(b-this.$VideoPlayerShakaPerformanceLogger24);this.getEventLogger("main_thread_blocked").setClientTimeBegin(c).setClientTimeDuration(b-c).setClientTimeEnd(b).log();this.$VideoPlayerShakaPerformanceLogger24=Number(a)};e.setDynamicBitrate=function(a){this.$VideoPlayerShakaPerformanceLogger20=a!=null?Math.round(a):null};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));a.$VideoPlayerShakaPerformanceLogger27=null;g["default"]=a}),98);