if (self.CavalryLogger) { CavalryLogger.start_js(["nZ\/CjY\/"]); }

__d("UIPageletContentCache",[],(function(a,b,c,d,e,f){a={cache:{},getContent:function(a){return a in this.cache?this.cache[a]:null},setContent:function(a,b){this.cache[a]=b}};e.exports=a}),null);
__d("UIPagelet",["ActorURI","AjaxPipeRequest","AsyncRequest","DOM","HTML","ScriptPathState","UIPageletContentCache","URI","emptyFunction","ge","gkx","isElementNode"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b,d){if(typeof a==="function")this._id=null,this._element=a;else{var e=a&&c("isElementNode")(a)?a.id:a;this._id=e||null;this._element=c("ge")(a||c("DOM").create("div"))}this._src=b||null;this._context_data=d||{};this._data={};this._handler=c("emptyFunction");this._setRequest(null);this._use_ajaxpipe=!1;this._use_post_request=!1;this._is_bundle=!0;this._allow_cross_page_transition=!1;this._append=!1;this._cache_content=!1;this._content_cache_key="";this._is_content_cached=null;this._constHeight=!1}var b=a.prototype;b.getElement=function(){return typeof this._element==="function"?this._element():this._element};b.setHandler=function(a){this._handler=a;return this};b.go=function(a,b){arguments.length>=2||typeof a==="string"?(this._src=a,this._data=b||{}):arguments.length==1&&(this._data=a);this.refresh();return this};b.setAllowCrossPageTransition=function(a){this._allow_cross_page_transition=a;return this};b.setBundleOption=function(a){this._is_bundle=a;return this};b.setErrorHandler=function(a){this._errorHandler=a;return this};b.setTransportErrorHandler=function(a){this.transportErrorHandler=a;return this};b.refresh=function(){if(this._use_ajaxpipe)c("ScriptPathState").setIsUIPageletRequest(!0),this._setRequest(new(c("AjaxPipeRequest"))(this._id,this._src)),this._request.setAppend(this._append).setConstHeight(this._constHeight).setJSNonBlock(this._jsNonblock).setAutomatic(this._automatic).setDisplayCallback(this._displayCallback).setFinallyHandler(this._finallyHandler),this._errorHandler&&this._request.setErrorHandler(this._errorHandler),this.transportErrorHandler&&this._request.setTransportErrorHandler(this.transportErrorHandler),this._allowIrrelevantRequests!=null&&this._request.setAllowIrrelevantRequests(this._allowIrrelevantRequests);else{if(this._cache_content){var a=d("UIPageletContentCache").getContent(this._content_cache_key);if(a!==null){this.handleContent(a,!0);return this}}var b=function(a){this._setRequest(null);a=c("HTML")(a.getPayload());this.handleContent(a);var b=a.getContent().contains("<iframe");!b&&this._cache_content&&d("UIPageletContentCache").setContent(this._content_cache_key,a)}.bind(this),e=this._displayCallback,f=this._finallyHandler;this._setRequest(new(c("AsyncRequest"))(this._src).setMethod("GET").setReadOnly(!0).setOption("bundle",this._is_bundle).setHandler(function(a){e?e(b.bind(null,a),a):b(a),f&&f(a)}));this._errorHandler&&this._request.setErrorHandler(this._errorHandler);this.transportErrorHandler&&this._request.setTransportErrorHandler(this.transportErrorHandler);this._use_post_request&&this._request.setMethod("POST")}a=babelHelpers["extends"]({},this._context_data,this._data);this._actorID&&(a[d("ActorURI").PARAMETER_ACTOR]=this._actorID);this._request.setAllowCrossPageTransition(this._allow_cross_page_transition).setData({data:JSON.stringify(a)}).send();return this};b.handleContent=function(a,b){var d=this.getElement();d!=null&&(this._append?c("DOM").appendContent(d,a):c("DOM").setContent(d,a));b?(this._is_content_cached=!0,this._displayCallback(c("emptyFunction"))):this._is_content_cached=!1;this._handler!=null&&this._handler()};b.cancel=function(){this._request&&this._request.abort()};b.abandon=function(){this._request&&(this._request.abandon(),(!c("gkx")("171")||this._request instanceof c("AsyncRequest"))&&this._request.setInitialHandler(function(){return!1}))};b.setUseAjaxPipe=function(a){this._use_ajaxpipe=!!a;return this};b.setUsePostRequest=function(a){this._use_post_request=!!a;return this};b.setAppend=function(a){this._append=!!a;return this};b.setJSNonBlock=function(a){this._jsNonblock=!!a;return this};b.setAutomatic=function(a){this._automatic=!!a;return this};b.setDisplayCallback=function(a){this._displayCallback=a;return this};b.setConstHeight=function(a){this._constHeight=!!a;return this};b.setFinallyHandler=function(a){this._finallyHandler=a;return this};b.setAllowIrrelevantRequests=function(a){this._allowIrrelevantRequests=a;return this};b.setActorID=function(a){this._actorID=a;return this};b.setCacheContent=function(a){this._cache_content=a;return this};b.setContentCacheKey=function(a){this._content_cache_key=a;return this};b.isContentCached=function(){return this._is_content_cached};b._setRequest=function(a){this._request=a,this._typedRequest=a};a.appendToInline=function(a,b){a=c("ge")(a);b=c("ge")(b);if(a&&b){while(b.firstChild)c("DOM").appendContent(a,b.firstChild);c("DOM").remove(b)}};a.loadFromEndpoint=function(b,d,e,f){f=f||{};var g="/ajax/pagelet/generic.php/"+b;f.intern&&(g="/intern"+g);f.query&&(g=g+"?"+f.query);g=new(c("URI"))(g.replace(/\/+/g,"/"));f.subdomain&&g.setSubdomain(f.subdomain);var h=!1,i="";f.contentCacheKey&&(h=!0,i=b+","+String(f.contentCacheKey));b=new a(d,g,e).setUseAjaxPipe(f.usePipe).setBundleOption(f.bundle!==!1).setAppend(f.append).setJSNonBlock(f.jsNonblock).setAutomatic(f.automatic).setDisplayCallback(f.displayCallback).setConstHeight(f.constHeight).setAllowCrossPageTransition(f.crossPage).setFinallyHandler(f.finallyHandler||c("emptyFunction")).setErrorHandler(f.errorHandler).setTransportErrorHandler(f.transportErrorHandler).setAllowIrrelevantRequests(f.allowIrrelevantRequests).setActorID(f.actorID).setCacheContent(h).setContentCacheKey(i).setUsePostRequest(f.usePostRequest);f.handler&&b.setHandler(f.handler);b.go();return b};a.loadFromEndpointBatched=function(b,d,e){var f=b.slice(0,e),g=b.slice(e);if(g.length>0){b=f[f.length-1];var h=c("emptyFunction");b.options&&b.options.finallyHandler&&(h=b.options.finallyHandler);b.options=babelHelpers["extends"]({},b.options,{finallyHandler:function(){h(),window.setTimeout(function(){a.loadFromEndpointBatched(g,d,e)},1)}})}f.forEach(function(b){a.loadFromEndpoint(b.controller,b.target_element,b.data,babelHelpers["extends"]({},b.options,d,{bundle:!0}))})};return a}();g["default"]=a}),98);