if (self.CavalryLogger) { CavalryLogger.start_js(["D\/kgKN3"]); }

__d("LiveVideoWorkplaceP2PPlaybackTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:LiveVideoWorkplaceP2PPlaybackLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:LiveVideoWorkplaceP2PPlaybackLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:LiveVideoWorkplaceP2PPlaybackLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBroadcastID=function(a){this.$1.broadcast_id=a;return this};c.setBroadcastURL=function(a){this.$1.broadcast_url=a;return this};c.setCommunityID=function(a){this.$1.community_id=a;return this};c.setCommunityName=function(a){this.$1.community_name=a;return this};c.setCustomerID=function(a){this.$1.customer_id=a;return this};c.setEventStr=function(a){this.$1.event_str=a;return this};c.setExceptionCode=function(a){this.$1.exception_code=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setExceptionSeverity=function(a){this.$1.exception_severity=a;return this};c.setExceptionTrace=function(a){this.$1.exception_trace=a;return this};c.setExceptionType=function(a){this.$1.exception_type=a;return this};c.setHiveClientStatsCdnRequests=function(a){this.$1.hive_client_stats_cdn_requests=a;return this};c.setHiveClientStatsCdnResponseBytes=function(a){this.$1.hive_client_stats_cdn_response_bytes=a;return this};c.setHiveClientStatsCdnResponseErrors=function(a){this.$1.hive_client_stats_cdn_response_errors=a;return this};c.setHiveClientStatsCdnResponses=function(a){this.$1.hive_client_stats_cdn_responses=a;return this};c.setHiveClientStatsNumPartners=function(a){this.$1.hive_client_stats_num_partners=a;return this};c.setHiveClientStatsP2pRequests=function(a){this.$1.hive_client_stats_p2p_requests=a;return this};c.setHiveClientStatsP2pResponseBytes=function(a){this.$1.hive_client_stats_p2p_response_bytes=a;return this};c.setHiveClientStatsP2pResponseErrors=function(a){this.$1.hive_client_stats_p2p_response_errors=a;return this};c.setHiveClientStatsP2pResponses=function(a){this.$1.hive_client_stats_p2p_responses=a;return this};c.setHiveClientStatsSavings=function(a){this.$1.hive_client_stats_savings=a;return this};c.setHivePartnerID=function(a){this.$1.hive_partner_id=a;return this};c.setHivePluginTech=function(a){this.$1.hive_plugin_tech=a;return this};c.setHiveStreamingTicketingEndpoint=function(a){this.$1.hive_streaming_ticketing_endpoint=a;return this};c.setHTTPStatusCode=function(a){this.$1.http_status_code=a;return this};c.setP2pPlaybackReportURL=function(a){this.$1.p2p_playback_report_url=a;return this};c.setP2pPlaybackTicketURL=function(a){this.$1.p2p_playback_ticket_url=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setSummaryCdnTraffic=function(a){this.$1.summary_cdn_traffic=a;return this};c.setSummaryP2pTraffic=function(a){this.$1.summary_p2p_traffic=a;return this};c.setSummaryPeerSavings=function(a){this.$1.summary_peer_savings=a;return this};c.setSummaryQualityScore=function(a){this.$1.summary_quality_score=a;return this};c.setSummaryUniqueViewers=function(a){this.$1.summary_unique_viewers=a;return this};c.setSummaryViewedMinutes=function(a){this.$1.summary_viewed_minutes=a;return this};c.setTimeMs=function(a){this.$1.time_ms=a;return this};c.setTimeSpentInP2pMs=function(a){this.$1.time_spent_in_p2p_ms=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setViewerManifestURL=function(a){this.$1.viewer_manifest_url=a;return this};return a}();c={broadcast_id:!0,broadcast_url:!0,community_id:!0,community_name:!0,customer_id:!0,event_str:!0,exception_code:!0,exception_message:!0,exception_severity:!0,exception_trace:!0,exception_type:!0,hive_client_stats_cdn_requests:!0,hive_client_stats_cdn_response_bytes:!0,hive_client_stats_cdn_response_errors:!0,hive_client_stats_cdn_responses:!0,hive_client_stats_num_partners:!0,hive_client_stats_p2p_requests:!0,hive_client_stats_p2p_response_bytes:!0,hive_client_stats_p2p_response_errors:!0,hive_client_stats_p2p_responses:!0,hive_client_stats_savings:!0,hive_partner_id:!0,hive_plugin_tech:!0,hive_streaming_ticketing_endpoint:!0,http_status_code:!0,p2p_playback_report_url:!0,p2p_playback_ticket_url:!0,session_id:!0,summary_cdn_traffic:!0,summary_p2p_traffic:!0,summary_peer_savings:!0,summary_quality_score:!0,summary_unique_viewers:!0,summary_viewed_minutes:!0,time_ms:!0,time_spent_in_p2p_ms:!0,video_id:!0,viewer_manifest_url:!0};e.exports=a}),null);
__d("VideoPlayerPlayLogger",["EventListener","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){var d=this;this.$3=new(c("SubscriptionsHandler"))();this.$1=a;this.$2=b;this.$3.addSubscriptions(c("EventListener").listen(this.$1,"playing",function(){return d.$5()}),c("EventListener").listen(this.$1,"pause",function(){return d.$6()}))}var b=a.prototype;b.playStarted=function(){(this.$1.paused||this.$1.ended)&&(this.$4=this.$2.getOperationLogger("play").setState("pending_play").start())};b.$6=function(){this.$4&&(this.$4.setResult("aborted").log(),this.$4=null)};b.$5=function(){this.$4&&(this.$4.log(),this.$4=null)};b.unload=function(){this.$3.release()};return a}();g["default"]=a}),98);
__d("OzConfigurableRequestImplementation",["MaybeNativePromise","oz-player/networks/OzHTTPHeaders","oz-player/utils/arrayBuffer2OzReadableStream","parseHeaders"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=new(d("oz-player/networks/OzHTTPHeaders").OzHTTPHeaders)(),e=c("parseHeaders")(a);Object.keys(e).forEach(function(a){b.append(a,e[a])});return b}function a(a){return function(b,d,e){var f={url:b,http:d,options:e,method:"GET",responseType:"arraybuffer"};b=new(c("MaybeNativePromise"))(function(b,d){a(f,function(a,d,e){e={body:c("oz-player/utils/arrayBuffer2OzReadableStream")(a),headers:h(e),ok:!0,status:d,arrayBuffer:function(){return c("MaybeNativePromise").resolve(a)}};b(e)},function(a,e,f){if(a==null||a==="0")d(new TypeError("NetworkError"));else{var g=new ArrayBuffer(0);f={body:c("oz-player/utils/arrayBuffer2OzReadableStream")(g),headers:h(e),ok:!1,status:a,arrayBuffer:function(){return c("MaybeNativePromise").resolve(g)}};b(f)}})});return b}}g["default"]=a}),98);
__d("OzMaximumDimensionsRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.applyRestriction=function(a,b){if(a.length===0)return[];var c=this.$1,d=Infinity;b=null;var e=[];a.forEach(function(a){var f=a.getWidth(),g=a.getHeight(),h=c.maxWidth,i=c.maxHeight;h=f<=h&&g<=i;h&&e.push(a);f*g<d&&(d=f*g,b=a)});return e.length>0?e:b?[b]:[]};return a}();f["default"]=a}),66);
__d("P2PPlaybackSessionLogger",["LiveVideoWorkplaceP2PPlaybackTypedLogger","Random"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$4=!1,this.$1=a,this.$2=d("Random").uint32(),this.$7()}var b=a.prototype;b.getSessionID=function(){return this.$2};b.setCurrentHiveStats=function(a){this.$3=a,!this.$4&&a.p2pRequests>0&&(this.$4=!0,this.logReceivedFirstPeerRequest())};b.pauseStatsLogging=function(){this.$5&&(window.clearInterval(this.$5),this.$5=null)};b.resumeStatsLogging=function(){this.$7()};b.$7=function(){this.$5||(this.$5=window.setInterval(this.logStats.bind(this),60*1e3))};b.$8=function(){return new(c("LiveVideoWorkplaceP2PPlaybackTypedLogger"))().setVideoID(this.$1).setSessionID(this.$2).setTimeMs(Date.now())};b.logEnableP2P=function(){this.$8().setEventStr("ENABLE_P2P").log()};b.logSessionInit=function(a,b){this.$6=Date.now(),this.$8().setEventStr("SESSION_INITIALIZED").setHivePluginTech(a).setViewerManifestURL(b).log()};b.logSessionActive=function(a){this.$8().setEventStr("SESSION_ACTIVE").setHivePluginTech(a).log()};b.logManifestMismatch=function(a,b){this.$8().setEventStr("MANIFEST_MISMATCH").setBroadcastURL(a).setViewerManifestURL(b).log()};b.logError=function(a){this.$8().setEventStr("ERROR").setExceptionTrace(a.stack).setExceptionMessage(a.message).setExceptionType(a.name).log()};b.logHiveError=function(a){this.$8().setEventStr("ERROR").setExceptionMessage(a.message).setExceptionType("HiveErrorMessage").setExceptionCode(a.code).setExceptionSeverity(a.severity).log()};b.logUnload=function(){var a=this.$8().setEventStr("UNLOAD"),b=this.$3;b&&a.setHiveClientStatsCdnRequests(b.cdnRequests).setHiveClientStatsCdnResponseBytes(b.cdnResponseBytes).setHiveClientStatsCdnResponseErrors(b.cdnResponseErrors).setHiveClientStatsCdnResponses(b.cdnResponses).setHiveClientStatsP2pRequests(b.p2pRequests).setHiveClientStatsP2pResponseBytes(b.p2pResponseBytes).setHiveClientStatsP2pResponseErrors(b.p2pResponseErrors).setHiveClientStatsP2pResponses(b.p2pResponses).setHiveClientStatsSavings(parseInt(b.savings,10)).setHiveClientStatsNumPartners(Object.keys(b.partners).length);a.log()};b.logCreatedP2PVideoSource=function(){this.$8().setEventStr("CREATED_VIDEO_SOURCE").log()};b.logStats=function(){var a=this.$3,b=this.$8().setEventStr("STATS");a&&b.setHiveClientStatsCdnRequests(a.cdnRequests).setHiveClientStatsCdnResponseBytes(a.cdnResponseBytes).setHiveClientStatsCdnResponseErrors(a.cdnResponseErrors).setHiveClientStatsCdnResponses(a.cdnResponses).setHiveClientStatsP2pRequests(a.p2pRequests).setHiveClientStatsP2pResponseBytes(a.p2pResponseBytes).setHiveClientStatsP2pResponseErrors(a.p2pResponseErrors).setHiveClientStatsP2pResponses(a.p2pResponses).setHiveClientStatsSavings(parseInt(a.savings,10)).setHiveClientStatsNumPartners(Object.keys(a.partners).length);b.log()};b.logReceivedFirstPeerRequest=function(){this.$8().setEventStr("RECEIVED_FIRST_PEER_REQUEST").log()};b.logEndSession=function(){this.pauseStatsLogging();var a=this.$6;a=a!=null?Date.now()-a:-1;this.$8().setEventStr("SESSION_END").setTimeSpentInP2pMs(a).log()};b.logMissingGetRequestPromise=function(){this.$8().setEventStr("MISSING_GET_REQUEST_PROMISE").log()};return a}();g["default"]=a}),98);
__d("reportOzError",["oz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a instanceof c("oz-player/utils/OzError")){var b=a.getExtra();return{error:a.getType(),message:a.getDescription(),httpStatus:b.code,url:b.url,stack:a.stack}}else return{error:"OZ_JAVASCRIPT_NATIVE",message:a.name+" "+a.message,httpStatus:null,url:null,stack:a.stack}}g["default"]=a}),98);
__d("VideoPlayerHTML5Oz",["Deferred","EventEmitter","EventListener","FBLogger","MaybeNativePromise","ODS","OzActiveActiveFailoverNetworkRequestStreamHandler","OzConfigurableRequestImplementation","OzCustomParsers","OzCustomRepresentationParsers","OzDashPrefetchCache","OzMaximumDimensionsRestriction","OzPredictedSegmentTimelineParser","OzVideoLiveTraceNetworkRequestStreamHandler","P2PPlaybackSessionLogger","Promise","SubscriptionsHandler","TimeRanges","URI","VideoPlayerConnectionQuality","VideoPlayerOzWWWConfig","VideoPlayerOzWWWGlobalConfig","VideoPlayerPlayLogger","VideoPlayerQualitiesArray","VideoPlayerShakaPerformanceLogger","cr:1934445","getOzPlaybackRestrictions","gkx","handleOzManifestFetchErrorEvent","handleOzStreamErrorEvent","manifestHasUnsupportedCodecs","nullthrows","oz-player","oz-player/configs/OzConfigUtils","oz-player/networks/OzBandwidthEstimator","oz-player/networks/createNetworkError","oz-player/shims/OzStreams","oz-player/utils/OzError","regeneratorRuntime","reportOzError","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h=/(livestream-)?lookaside\.(facebook|workplace)\.com$/,i=function(a){return h.test(a.getDomain())};a=function(a){babelHelpers.inheritsLoose(e,a);e.isSupported=function(a){var e;!a.hasDashManifest()&&!a.getLiveManifestUrl()?e="noDashManifest":!window.MediaSource?e="noMediaSourceSupport":!window.fetch&&!b("cr:1934445")?e="noFetch":!d("oz-player/shims/OzStreams").OzReadableStream||!d("oz-player/shims/OzStreams").OzReadableStream.prototype.pipeTo||!d("oz-player/shims/OzStreams").OzReadableStream.prototype.pipeThrough?e="noReadableStream":!d("oz-player/shims/OzStreams").OzWritableStream?e="noWritableStream":c("manifestHasUnsupportedCodecs")(a.getDashManifest())&&(e="codecNotSupported");if(e){d("ODS").bumpEntityKey(2966,"VideoPlayerHtml5Oz","fallback."+e);return!1}return!0};e.getEstimatedBandwidth=function(){return c("oz-player/networks/OzBandwidthEstimator").getBandwidth(c("VideoPlayerOzWWWGlobalConfig"))};function e(b,d,e){var f,g=e.config,h=e.manifest,i=e.manifestUrl,j=e.videoID,k=e.isLive,l=e.isServableViaFbms,m=e.accessToken,n=e.playerOrigin,o=e.playerSuborigin,p=e.playerInstanceKey,q=e.prefetchCache,r=e.resolutionConstraintMaxHeight,s=e.resolutionConstraintMaxWidth,t=e.width,u=e.height,v=e.minPlayQuality,w=e.startTimestamp,x=e.seekHandler,y=e.videoLiveTrace,z=e.OzDrmHelper,A=e.videoLicenseUriMap,B=e.graphApiVideoLicenseUri,C=e.widevineCert,D=e.desiredLatencyMs,E=e.latencyToleranceMs,F=e.p2pSettings;e=e.disableLogging;f=a.call(this)||this;f.$VideoPlayerHTML5Oz5=1;f.$VideoPlayerHTML5Oz6=!1;f.$VideoPlayerHTML5Oz7=null;f.$VideoPlayerHTML5Oz15=null;f.$VideoPlayerHTML5Oz22=!1;f.$VideoPlayerHTML5Oz23=!1;f.$VideoPlayerHTML5Oz24=null;f.$VideoPlayerHTML5Oz25=null;f.$VideoPlayerHTML5Oz26=!1;f.$VideoPlayerHTML5Oz27=!1;f.$VideoPlayerHTML5Oz30=!0;f.$VideoPlayerHTML5Oz31=!1;f.$VideoPlayerHTML5Oz42=null;f.$VideoPlayerHTML5Oz46=null;f.$VideoPlayerHTML5Oz47=!1;f.$VideoPlayerHTML5Oz1=b;f.$VideoPlayerHTML5Oz2=h;f.$VideoPlayerHTML5Oz3=new(c("VideoPlayerOzWWWConfig"))(g);f.$VideoPlayerHTML5Oz16=d;f.$VideoPlayerHTML5Oz13=i;f.$VideoPlayerHTML5Oz14=q;f.$VideoPlayerHTML5Oz17=j;f.$VideoPlayerHTML5Oz18=t;f.$VideoPlayerHTML5Oz19=u;f.$VideoPlayerHTML5Oz20=w;f.$VideoPlayerHTML5Oz28=x;f.$VideoPlayerHTML5Oz29=y;f.$VideoPlayerHTML5Oz32=z;f.$VideoPlayerHTML5Oz33=m;f.$VideoPlayerHTML5Oz34=A;f.$VideoPlayerHTML5Oz35=B;f.$VideoPlayerHTML5Oz36=C;f.$VideoPlayerHTML5Oz37=D;f.$VideoPlayerHTML5Oz38=E;f.$VideoPlayerHTML5Oz26=k;f.$VideoPlayerHTML5Oz47=(h=e)!=null?h:!1;(typeof r==="number"||typeof s==="number")&&(f.$VideoPlayerHTML5Oz15=new(c("OzMaximumDimensionsRestriction"))({maxHeight:(typeof r==="number"?r:null)||Infinity,maxWidth:(typeof s==="number"?s:null)||Infinity}));F&&(f.$VideoPlayerHTML5Oz39=F.ticket,f.$VideoPlayerHTML5Oz43=F.hive_initialization_options,f.$VideoPlayerHTML5Oz40=F.config,f.$VideoPlayerHTML5Oz40&&(f.$VideoPlayerHTML5Oz40.delay_p2p_until_play=!1),f.$VideoPlayerHTML5Oz48());f.$VideoPlayerHTML5Oz47?f.$VideoPlayerHTML5Oz8=null:f.$VideoPlayerHTML5Oz8=c("VideoPlayerShakaPerformanceLogger").shouldInitialize()?new(c("VideoPlayerShakaPerformanceLogger"))({videoID:j,video:b,representationId:null,isLive:k,isServableViaFbms:l,accessToken:m,playerOrigin:n,playerSuborigin:o,playerVersion:f.getPlayerVersion(),uniqueID:p,getBandwidthEstimate:function(a){return c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(f.$VideoPlayerHTML5Oz3)},getApproximateFBLSToPlayerDisplayLatency:function(){return null},isDrm:f.isDrm()}):null;f.$VideoPlayerHTML5Oz8&&(f.$VideoPlayerHTML5Oz21=new(c("VideoPlayerPlayLogger"))(f.$VideoPlayerHTML5Oz1,f.$VideoPlayerHTML5Oz8));f.$VideoPlayerHTML5Oz12=v;(!f.$VideoPlayerHTML5Oz14||typeof f.$VideoPlayerHTML5Oz14.getCachedRepresentations!=="function")&&(f.$VideoPlayerHTML5Oz14=null);!f.$VideoPlayerHTML5Oz14&&f.$VideoPlayerHTML5Oz3.getBool("use_prefetch_cache",!1)&&(f.$VideoPlayerHTML5Oz14=new(c("OzDashPrefetchCache"))());f.$VideoPlayerHTML5Oz49();return f}var f=e.prototype;f.$VideoPlayerHTML5Oz49=function(){var a=this;this.$VideoPlayerHTML5Oz11=new(c("SubscriptionsHandler"))();this.$VideoPlayerHTML5Oz50();this.$VideoPlayerHTML5Oz11.addSubscriptions(c("EventListener").listen(this.$VideoPlayerHTML5Oz1,"timeupdate",function(b){a.$VideoPlayerHTML5Oz51(b.target.currentTime)}))};f.setup=function(){var a=[];this.$VideoPlayerHTML5Oz8&&a.push(this.$VideoPlayerHTML5Oz8);var b=[];this.$VideoPlayerHTML5Oz3.getBool("force_initial_representation",!1)&&(b=this.$VideoPlayerHTML5Oz16);this.$VideoPlayerHTML5Oz52({manifest:this.$VideoPlayerHTML5Oz2,manifestUrl:this.$VideoPlayerHTML5Oz13,loggerProviders:a,prefetchCache:this.$VideoPlayerHTML5Oz14,initialRepresentations:b,videoID:this.$VideoPlayerHTML5Oz17,width:this.$VideoPlayerHTML5Oz18,height:this.$VideoPlayerHTML5Oz19})};f.$VideoPlayerHTML5Oz52=function(a){var e=this,f=a.manifest,g=a.manifestUrl,h=a.loggerProviders,j=a.prefetchCache,k=a.initialRepresentations,l=a.videoID;a.width;a.height;a=this.$VideoPlayerHTML5Oz53();var m=null;switch(this.$VideoPlayerHTML5Oz12){case"hd":case"HD":m="HD";break;case"sd":case"SD":m="SD";break;case"uhd":case"UHD":m="UHD";break}this.$VideoPlayerHTML5Oz46=this.$VideoPlayerHTML5Oz44?c("OzConfigurableRequestImplementation")(this.$VideoPlayerHTML5Oz44.getRequestImplementation()):null;m=c("getOzPlaybackRestrictions")(m,this.$VideoPlayerHTML5Oz3);this.$VideoPlayerHTML5Oz15&&m.push(this.$VideoPlayerHTML5Oz15);var n=this.$VideoPlayerHTML5Oz4=new(c("oz-player"))({videoNodeOrQuickStarter:this.$VideoPlayerHTML5Oz1,config:d("oz-player/configs/OzConfigUtils").provideConfigWithDefaults(this.$VideoPlayerHTML5Oz3),rawMpdXml:f===""&&this.$VideoPlayerHTML5Oz3.getBool("blue_video_player_pass_inline_mpd_xml_empty_string_as_undefined",!1)?void 0:f,customSegmentTimelineParser:this.$VideoPlayerHTML5Oz3.getBool("enable_predictive_dash",!1)?new(c("OzPredictedSegmentTimelineParser"))():void 0,loggerConfig:{perfLoggerProviders:h,observedOperationLoggers:[],isOzDevConsoleEnabled:c("gkx")("722076")},prefetchCache:j,networkRequestStreamHandlers:[new(c("OzActiveActiveFailoverNetworkRequestStreamHandler"))(function(a,b){var d=a.headers;a=a.status;a=c("oz-player/networks/createNetworkError")(new Error("Replica switch requested via HTTP headers"),a,d,b,"HTTP error.");throw a}),new(c("OzVideoLiveTraceNetworkRequestStreamHandler"))(function(a,b,c){e.$VideoPlayerHTML5Oz29&&e.$VideoPlayerHTML5Oz29.handleHeadersAndBody(a,b,c)},this.$VideoPlayerHTML5Oz3.getBool("live_trace_parse_emsg",!1))],getShouldIncludeCredentials:this.$VideoPlayerHTML5Oz3.getBool("use_oz_credentials_provider",!1)?i:null,getOverrideOzRequestImplementation:function(){var a,c=!window.fetch||e.$VideoPlayerHTML5Oz3.getBool("blue_video_player_force_xhr",!1)?b("cr:1934445"):null;return(a=(a=e.$VideoPlayerHTML5Oz46)!=null?a:c)!=null?a:null},initialRepresentationIDs:k||[],customParsers:d("OzCustomParsers").createOzCustomParser(),entityKey:l,videoPlaybackRestrictions:m,customRepresentationParsers:d("OzCustomRepresentationParsers").createOzCustomRepresentationParsers({ozConfig:this.$VideoPlayerHTML5Oz3,startTimestamp:this.$VideoPlayerHTML5Oz20}),seekHandler:this.$VideoPlayerHTML5Oz28,initialPlaybackPositionForDynamicMpd:this.$VideoPlayerHTML5Oz37!=null&&this.$VideoPlayerHTML5Oz37>0?this.$VideoPlayerHTML5Oz37/1e3*-1:this.$VideoPlayerHTML5Oz3.getNumber("live_initial_playback_position",0),liveheadFallBehindBlockThreshold:this.$VideoPlayerHTML5Oz37!=null&&this.$VideoPlayerHTML5Oz37>0&&this.$VideoPlayerHTML5Oz38!=null&&this.$VideoPlayerHTML5Oz38>0?(this.$VideoPlayerHTML5Oz37+this.$VideoPlayerHTML5Oz38)/1e3:this.$VideoPlayerHTML5Oz3.getNumber("livehead_fall_behind_block_threshold",0),liveheadFallBehindBlockMargin:this.$VideoPlayerHTML5Oz37!=null&&this.$VideoPlayerHTML5Oz37>0?this.$VideoPlayerHTML5Oz37/2/1e3:this.$VideoPlayerHTML5Oz3.getNumber("live_time_range_block_margin",0),startTimeStamp:this.$VideoPlayerHTML5Oz3.getBool("fix_start_timestamp",!1)?this.$VideoPlayerHTML5Oz20||0:0,drmProviders:a,getVideoDimensions:function(){return{height:e.$VideoPlayerHTML5Oz19,width:e.$VideoPlayerHTML5Oz18}}});this.$VideoPlayerHTML5Oz11.addSubscriptions(n.onError(this.$VideoPlayerHTML5Oz54.bind(this)),n.addListener("destroyed",this.$VideoPlayerHTML5Oz55.bind(this)),n.addListener("debug/dashPlayerEvent",this.$VideoPlayerHTML5Oz56.bind(this)),n.addListener("streamEnd",this.$VideoPlayerHTML5Oz57.bind(this)),n.addListener("manifestFetchError",function(a){c("handleOzManifestFetchErrorEvent")(e.$VideoPlayerHTML5Oz3,a)}),n.addListener("streamError",function(a){return c("handleOzStreamErrorEvent")(e.$VideoPlayerHTML5Oz3,a)}));this.$VideoPlayerHTML5Oz11.addSubscriptions(n.addListener("enterBuffering",this.$VideoPlayerHTML5Oz58.bind(this)),n.addListener("leaveBuffering",this.$VideoPlayerHTML5Oz59.bind(this)));if(this.$VideoPlayerHTML5Oz39&&this.$VideoPlayerHTML5Oz26&&this.$VideoPlayerHTML5Oz40)if(!this.$VideoPlayerHTML5Oz40.delay_p2p_until_play||this.$VideoPlayerHTML5Oz41)this.$VideoPlayerHTML5Oz60();else{f=function a(){e.$VideoPlayerHTML5Oz1.removeEventListener("play",a),e.$VideoPlayerHTML5Oz60()};h=function a(){e.$VideoPlayerHTML5Oz1.removeEventListener("ended",a),e.disableP2PPlayback()};this.$VideoPlayerHTML5Oz1.addEventListener("play",f);this.$VideoPlayerHTML5Oz1.addEventListener("ended",h)}this.$VideoPlayerHTML5Oz11.addSubscriptions(n.addListener("mpdReady",function(a){e.$VideoPlayerHTML5Oz61(a)}));this.$VideoPlayerHTML5Oz42?this.$VideoPlayerHTML5Oz42.then(function(){var a=e.$VideoPlayerHTML5Oz13;n.load(a)})["catch"](function(){e.$VideoPlayerHTML5Oz13=g,e.disableP2PPlayback(),n.load(g)}):n.load(g)};f.$VideoPlayerHTML5Oz61=function(a){this.ispDASH()&&this.$VideoPlayerHTML5Oz3.setContext("latency_level","predictive"),this.$VideoPlayerHTML5Oz62(this.$VideoPlayerHTML5Oz4),this.$VideoPlayerHTML5Oz63(a),this.$VideoPlayerHTML5Oz29&&this.$VideoPlayerHTML5Oz64(a),this.$VideoPlayerHTML5Oz3.getBool("update_seekable_range",!1)&&this.$VideoPlayerHTML5Oz65(a)};f.$VideoPlayerHTML5Oz48=function(){var a=this,b=this.$VideoPlayerHTML5Oz45;b==null&&(this.$VideoPlayerHTML5Oz45=b=new(c("P2PPlaybackSessionLogger"))(this.$VideoPlayerHTML5Oz17));try{var d;b.logEnableP2P();var e=this.$VideoPlayerHTML5Oz43?this.$VideoPlayerHTML5Oz43:{};e.debugLevel=(d=e.debugLevel)!=null?d:"debug";e.hiveTechOrder=(d=e.hiveTechOrder)!=null?d:["HiveJS","StatsJS","HiveJava"];d=e.HiveJS?e.HiveJS:{};d.renderStatsCallback=function(b){a.emit("debug/dashPlayerEvent",{type:"P2PStats",event:b}),c("nullthrows")(a.$VideoPlayerHTML5Oz45).setCurrentHiveStats(b)};e.onActiveSession=function(b){a.$VideoPlayerHTML5Oz45&&a.$VideoPlayerHTML5Oz45.logSessionActive(b.tech),a.emit("debug/dashPlayerEvent",{type:"P2PTech",event:b.tech})};var f=e.hiveTechOrder!=null?e.hiveTechOrder.indexOf("HiveJava"):-1,g=this.$VideoPlayerHTML5Oz40;g&&(g.disable_hivejava_for_livevc&&this.$VideoPlayerHTML5Oz13&&this.$VideoPlayerHTML5Oz13.startsWith("https://livestream-lookaside")&&e.hiveTechOrder&&f!==-1&&e.hiveTechOrder.splice(f,1),e.HiveJS=d,e.telemetryId=b.getSessionID(),e.onError=this.$VideoPlayerHTML5Oz66.bind(this),this.$VideoPlayerHTML5Oz44=new window.HiveOz(e))}catch(a){b.logError(a),this.$VideoPlayerHTML5Oz41=void 0}};f.$VideoPlayerHTML5Oz60=function(){var a=this,d,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:d=this.$VideoPlayerHTML5Oz44;e=this.$VideoPlayerHTML5Oz45;f=new(c("Deferred"))(c("MaybeNativePromise"));j.prev=3;if(!(d!=null)){j.next=19;break}this.$VideoPlayerHTML5Oz3.getBool("fix_oz_p2p_enable_failed",!1)||(this.$VideoPlayerHTML5Oz42=f.getPromise());window.HiveConfig.SensitiveInfo.restrictedConnectivityInfo=!0;if(this.$VideoPlayerHTML5Oz13){j.next=9;break}return j.abrupt("return");case 9:g=this.$VideoPlayerHTML5Oz13.substring(this.$VideoPlayerHTML5Oz13.indexOf("?"));this.$VideoPlayerHTML5Oz3.getBool("fix_oz_p2p_enable_failed",!1)&&(this.$VideoPlayerHTML5Oz42=f.getPromise());h=d.initSession(c("nullthrows")(this.$VideoPlayerHTML5Oz39)+g,this.$VideoPlayerHTML5Oz4,this.$VideoPlayerHTML5Oz1);j.next=14;return b("regeneratorRuntime").awrap(h);case 14:i=this.$VideoPlayerHTML5Oz41=j.sent,this.$VideoPlayerHTML5Oz13=i.manifest,h.then(function(a){return f.resolve(a)},function(a){return f.reject(a)})["finally"](function(){a.$VideoPlayerHTML5Oz42=null}),i.manifest!=this.$VideoPlayerHTML5Oz13&&e&&e.logManifestMismatch(i.manifest,this.$VideoPlayerHTML5Oz13),e&&e.logSessionInit(i.tech,this.$VideoPlayerHTML5Oz13);case 19:j.next=26;break;case 21:j.prev=21,j.t0=j["catch"](3),this.$VideoPlayerHTML5Oz3.getBool("fix_oz_p2p_enable_failed",!1)&&f.reject(j.t0),e&&e.logError(j.t0),this.$VideoPlayerHTML5Oz41=void 0;case 26:case"end":return j.stop()}},null,this,[[3,21]])};f.$VideoPlayerHTML5Oz66=function(a){this.$VideoPlayerHTML5Oz45&&this.$VideoPlayerHTML5Oz45.logHiveError(a)};f.disableP2PPlayback=function(){try{this.$VideoPlayerHTML5Oz45&&this.$VideoPlayerHTML5Oz45.logEndSession(),this.$VideoPlayerHTML5Oz44&&this.$VideoPlayerHTML5Oz44.closeHiveSession()}catch(a){c("FBLogger")("www_p2p_playback").warn(a.message)}this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz3.getBool("unset_override_oz_request_implementation_on_hive_error",!1)&&(this.$VideoPlayerHTML5Oz46=null);this.$VideoPlayerHTML5Oz45=null;this.$VideoPlayerHTML5Oz44=null;this.$VideoPlayerHTML5Oz41=null;this.$VideoPlayerHTML5Oz39=null};f.$VideoPlayerHTML5Oz65=function(a){var b=this;this.$VideoPlayerHTML5Oz11.addSubscriptions(a.addListener("updated",function(){b.emit("seekRangeChanged")}))};f.$VideoPlayerHTML5Oz53=function(){var a=[];this.$VideoPlayerHTML5Oz32&&a.push(new this.$VideoPlayerHTML5Oz32.OzWidevineDrmProviderModule(this.$VideoPlayerHTML5Oz17,this.$VideoPlayerHTML5Oz35,this.$VideoPlayerHTML5Oz34,this.$VideoPlayerHTML5Oz33,this.$VideoPlayerHTML5Oz36));return a};f.$VideoPlayerHTML5Oz67=function(){var a=this;return function(b,c){if(!a.$VideoPlayerHTML5Oz6||!a.$VideoPlayerHTML5Oz30)return;try{b=b.getCustomField("timescale")||0;if(!b||typeof b!=="number")return;a.emit("cea608CaptionsBytesReceived",{timescale:b,videoBytes:c})}catch(b){a.$VideoPlayerHTML5Oz54(b)}}};f.$VideoPlayerHTML5Oz51=function(a){if(this.$VideoPlayerHTML5Oz3.getBool("fix_representation_ended_timing",!1)&&(this.$VideoPlayerHTML5Oz1.paused||this.$VideoPlayerHTML5Oz1.seeking))return;if(!this.$VideoPlayerHTML5Oz4)return;a=this.$VideoPlayerHTML5Oz4.getVideoRepresentationIDAtTime(a);if(a!=null&&a!==this.$VideoPlayerHTML5Oz7){var b=this.$VideoPlayerHTML5Oz7;this.$VideoPlayerHTML5Oz7=a;b!=null&&this.emit("representation_ended",{representationID:b,nextRepresentationID:a})}};f.$VideoPlayerHTML5Oz50=function(){var a=this,b=this.$VideoPlayerHTML5Oz3.getNumber("connection_quality_context_throttle_frequency",0);if(b===0)return;var f=function(){a.$VideoPlayerHTML5Oz3.setContext("connection_quality",d("VideoPlayerConnectionQuality").evaluate(e.getEstimatedBandwidth))};this.$VideoPlayerHTML5Oz11.addSubscriptions(c("oz-player/networks/OzBandwidthEstimator").addListener("bandwidth_sampled",c("throttle")(f,b)));f()};f.$VideoPlayerHTML5Oz54=function(a){if(a instanceof c("oz-player/utils/OzError")){var b=a.getExtra();this.disableP2PPlayback();(b.code==="417"||b.code==="200")&&b.headers&&b.headers.has("x-fb-video-replica")?this.emit("replicaSwitch",{replica:parseInt(b.headers.get("x-fb-video-replica"),10),url:b.url,status:b.code,timestamp:new Date().valueOf()}):(this.emit("error",c("reportOzError")(a)),this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.destroy())}else this.emit("error",c("reportOzError")(a))};f.$VideoPlayerHTML5Oz57=function(){this.$VideoPlayerHTML5Oz27=!0};f.$VideoPlayerHTML5Oz55=function(){this.$VideoPlayerHTML5Oz4=null};f.$VideoPlayerHTML5Oz56=function(a){this.emit("debug/dashPlayerEvent",a.detail)};f.$VideoPlayerHTML5Oz68=function(){var a=1;return this.$VideoPlayerHTML5Oz24!=null&&Math.abs(this.$VideoPlayerHTML5Oz1.currentTime-this.$VideoPlayerHTML5Oz24)<a||this.$VideoPlayerHTML5Oz25!=null&&Math.abs(this.$VideoPlayerHTML5Oz1.currentTime-this.$VideoPlayerHTML5Oz25)<a?!0:!1};f.$VideoPlayerHTML5Oz58=function(a){this.$VideoPlayerHTML5Oz68()||(this.$VideoPlayerHTML5Oz22=!0,this.emit("bufferingStart"),this.$VideoPlayerHTML5Oz8&&(this.$VideoPlayerHTML5Oz9=this.$VideoPlayerHTML5Oz8.getOperationLogger("buffering").setType(a).start())),this.$VideoPlayerHTML5Oz3.getBool("throttle_playback_rate_on_stall",!1)&&this.$VideoPlayerHTML5Oz69()};f.$VideoPlayerHTML5Oz59=function(){(!this.$VideoPlayerHTML5Oz3.getBool("buffer_end_only_when_buffering",!1)||this.$VideoPlayerHTML5Oz22)&&(this.emit("bufferingEnd"),this.$VideoPlayerHTML5Oz9&&(this.$VideoPlayerHTML5Oz9.log(),this.$VideoPlayerHTML5Oz9=null),this.$VideoPlayerHTML5Oz22=!1),this.$VideoPlayerHTML5Oz3.getBool("throttle_playback_rate_on_stall",!1)&&this.$VideoPlayerHTML5Oz70()};f.$VideoPlayerHTML5Oz69=function(){this.$VideoPlayerHTML5Oz5==null&&(this.$VideoPlayerHTML5Oz5=this.$VideoPlayerHTML5Oz1.playbackRate),this.$VideoPlayerHTML5Oz1.playbackRate=0};f.$VideoPlayerHTML5Oz70=function(){this.$VideoPlayerHTML5Oz5&&(this.$VideoPlayerHTML5Oz1.playbackRate=this.$VideoPlayerHTML5Oz5),this.$VideoPlayerHTML5Oz5=null};f.$VideoPlayerHTML5Oz64=function(a){var b=this,c=function(){if(b.$VideoPlayerHTML5Oz29){var c=a.getCustomField("loapStreamType");typeof c==="number"&&b.$VideoPlayerHTML5Oz29&&b.$VideoPlayerHTML5Oz29.setStreamType(c)}};c();this.$VideoPlayerHTML5Oz11.addSubscriptions(a.addListener("updated",c))};f.$VideoPlayerHTML5Oz63=function(a){var b=this,d=function(){b.$VideoPlayerHTML5Oz31=!!a.getCustomField("hasInbandCaptionsFromUsingASRCaptions")||!!a.getCustomField("hasInbandCaptionsFromIsUsingAsrCaptionsEmployeeDogfooding")&&c("gkx")("1176251"),b.$VideoPlayerHTML5Oz71(!!a.getCustomField("hasInbandCaptionsFromAccessibility")||b.$VideoPlayerHTML5Oz31)};d();this.$VideoPlayerHTML5Oz11.addSubscriptions(a.addListener("updated",d))};f.$VideoPlayerHTML5Oz71=function(a){if(this.$VideoPlayerHTML5Oz6===a)return;this.$VideoPlayerHTML5Oz6=a;this.$VideoPlayerHTML5Oz6&&this.$VideoPlayerHTML5Oz4!=null&&this.$VideoPlayerHTML5Oz4.updatePlayerRunTimeConfig({videoStreamDataHandler:this.$VideoPlayerHTML5Oz67()});this.emit("cea608AvailabilityChanged")};f.$VideoPlayerHTML5Oz62=function(a){var b=this;a=a;if(!a)return;this.$VideoPlayerHTML5Oz3.getNumber("stream_interrupt_check_mpd_stale_count_threshold",0)>0&&this.$VideoPlayerHTML5Oz11.addSubscriptions(a.addListener("streamInterruptAt",function(a){b.$VideoPlayerHTML5Oz24=a,b.$VideoPlayerHTML5Oz22&&(b.emit("bufferingEnd"),b.$VideoPlayerHTML5Oz9&&(b.$VideoPlayerHTML5Oz9.log(),b.$VideoPlayerHTML5Oz9=null)),b.$VideoPlayerHTML5Oz72()}),a.addListener("streamResumedAt",function(a){b.$VideoPlayerHTML5Oz25=a,b.$VideoPlayerHTML5Oz23&&b.$VideoPlayerHTML5Oz73()}))};f.$VideoPlayerHTML5Oz72=function(){this.emit("streamInterrupted"),this.$VideoPlayerHTML5Oz22=!1,this.$VideoPlayerHTML5Oz23=!0,this.$VideoPlayerHTML5Oz8&&(this.$VideoPlayerHTML5Oz10=this.$VideoPlayerHTML5Oz8.getOperationLogger("stream_interrupted"))};f.$VideoPlayerHTML5Oz73=function(){this.emit("streamResumed"),this.$VideoPlayerHTML5Oz10&&(this.$VideoPlayerHTML5Oz10.log(),this.$VideoPlayerHTML5Oz10=null),this.$VideoPlayerHTML5Oz23=!1};f.play=function(){this.$VideoPlayerHTML5Oz21&&this.$VideoPlayerHTML5Oz21.playStarted();return this.$VideoPlayerHTML5Oz1.play()};f.pause=function(){this.$VideoPlayerHTML5Oz1.pause()};f.reload=function(){if(this.$VideoPlayerHTML5Oz3.getBool("enable_abortload_and_reload",!1)){this.$VideoPlayerHTML5Oz49();this.setup();return c("MaybeNativePromise").resolve()}return b("Promise").reject()};f.unload=function(){this.$VideoPlayerHTML5Oz11.release();this.$VideoPlayerHTML5Oz9&&(this.$VideoPlayerHTML5Oz9.log(),this.$VideoPlayerHTML5Oz9=null);this.$VideoPlayerHTML5Oz10&&(this.$VideoPlayerHTML5Oz10.log(),this.$VideoPlayerHTML5Oz10=null);this.$VideoPlayerHTML5Oz21&&this.$VideoPlayerHTML5Oz21.unload();var a=b("Promise").resolve();this.$VideoPlayerHTML5Oz3.getBool("enable_abortload_and_reload",!1)&&(this.$VideoPlayerHTML5Oz59(),this.$VideoPlayerHTML5Oz4&&(a=this.$VideoPlayerHTML5Oz4.destroy(),this.$VideoPlayerHTML5Oz4=null));return a};f.getVideoStreamInfoIDForTimePosition=function(a){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getVideoRepresentationIDAtTime(a)};f.getAudioStreamInfoIDForTimePosition=function(a){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getAudioRepresentationIDAtTime(a)};f.getDashAudioConfiguration=function(){return""};f.getLocalEstimator=function(){return null};f.setDimensions=function(a,b){this.$VideoPlayerHTML5Oz18=a,this.$VideoPlayerHTML5Oz19=b};f.getLongestInitResponseTime=function(){return 0};f.setPlaybackRate=function(a){this.$VideoPlayerHTML5Oz5=a,this.$VideoPlayerHTML5Oz1.playbackRate=a};f.areInbandCaptionsExpected=function(){return this.$VideoPlayerHTML5Oz6};f.areInbandCaptionsAutogenerated=function(){return this.$VideoPlayerHTML5Oz31};f.setEnableInbandCaptionsParsing=function(a){this.$VideoPlayerHTML5Oz30=a};f.setPreferredVideoQuality=function(a){if(!this.$VideoPlayerHTML5Oz4)return;this.$VideoPlayerHTML5Oz4.switchToVideoQuality(a)};f.setVideoStreamOffset=function(a){};f.getSelectedVideoQuality=function(){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getSelectedVideoQuality()};f.unsetPreferredVideoQuality=function(){this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.enableVideoQualityAdaptation()};f.getAvailableVideoQualities=function(){return d("VideoPlayerQualitiesArray").ensureVideoPlayerQualitiesArray(this.$VideoPlayerHTML5Oz4?this.$VideoPlayerHTML5Oz4.getVideoQualities():[])};f.getIsAbrEnabled=function(){return this.$VideoPlayerHTML5Oz3.getBool("enable_adaptation",!1)};f.canAutoSelectVideoQuality=function(){return!0};f.isDrm=function(){var a;this.$VideoPlayerHTML5Oz4&&(a=this.$VideoPlayerHTML5Oz4.isDrm());(a===void 0||a===null)&&this.$VideoPlayerHTML5Oz2&&(a=this.$VideoPlayerHTML5Oz2.indexOf("<ContentProtection")>=0);return a};f.setPreloadDisabled=function(a){};f.restoreStreamBufferSize=function(){};f.getDebug=function(){return{manifest:this.$VideoPlayerHTML5Oz2,DashPlayer:this.$VideoPlayerHTML5Oz4,AbrManager:this.$VideoPlayerHTML5Oz4?this.$VideoPlayerHTML5Oz4.getDebug().VideoAbrManager:null,BandwidthEstimator:c("oz-player/networks/OzBandwidthEstimator")}};f.getVideoProjection=function(){var a=this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.getMpd();return!a?null:a.getCustomField("fbProjection")};f.setEnableLiveheadCatchup=function(a){this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.setEnableLiveheadCatchup(a)};f.isFBWasLive=function(){return!1};f.clearBufferAfterSeekingIfLowerQuality=function(a){};f.isFBIsLiveTemplated=function(){var a=this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.getMpd();if(!a)return!1;a=a.getCustomField("isLiveTemplated");return!!a};f.isFBMS=function(){return!1};f.ispDASH=function(){var a=this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.getMpd();if(!a)return!1;a=(a=a.getVideoRepresentations()[0])!=null?a:null;return a!==null&&a.canPredict()};f.isLiveheadCatchupEnabled=function(){return!1};f.getFbManifestIdentifier=function(){var a=this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.getMpd();if(!a)return"";a=a.getCustomField("fbManifestIdentifier");return typeof a==="string"?a:""};f.getSeekableRanges=function(){var a=this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.getMpd();if(!a)return null;a=a.getVideoRepresentations();if(a.length){a=a[0];a=a.getTimeRanges();if(a.length){var b=a[0].startTime;a=Math.max(a[a.length-1].endTime-this.$VideoPlayerHTML5Oz3.getNumber("live_rewind_seek_to_live_delta",8),b);return new(c("TimeRanges"))([{startTime:b,endTime:a}])}}};f.refreshDashManifest=function(){return b("Promise").reject()};f.switchReplicaSet=function(a){var b=new(c("URI"))(this.$VideoPlayerHTML5Oz13);b.addQueryData("replica",a);this.$VideoPlayerHTML5Oz13=b.toString()};f.getPlaybackRate=function(){return 1};f.getPlayerVersion=function(){return"oz"};f.getManifestUrl=function(){return this.$VideoPlayerHTML5Oz13};f.getBandwidthEstimate=function(){return e.getEstimatedBandwidth()};f.isDashPerfLoggingEnabled=function(){return this.$VideoPlayerHTML5Oz8!=null};return e}(c("EventEmitter"));g["default"]=a}),98);